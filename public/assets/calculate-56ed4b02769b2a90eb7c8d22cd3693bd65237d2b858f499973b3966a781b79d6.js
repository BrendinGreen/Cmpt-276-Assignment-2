function calculateValues(){for(var e=getThresholds(),r=validation(e),t=new Array(sections-1).fill(0),o=0;o<e.length-1;o++)for(var s=0;s<grades.length;s++)grades[s].percentage>=e[o]&&grades[s].percentage<e[o+1]&&(t[o]++,grades[s].lettergrade=letters[o]);setProgress(r,t)}function setProgress(e,r){console.log(grades);for(var t=0;t<r.length;t++)document.getElementById("result"+t+"progress").value=e?0:r[t],document.getElementById("result"+t+"progress").max=""+r.reduce(function(e,r){return Math.max(e,r)})}function getThresholds(){for(var e=[],r=0;r<sections;r++)e[r]=parseFloat(document.getElementById("threshold"+r).value);return e}function validation(e){for(var r=!1,t=0;t<sections-1;t++)e[t]>=e[t+1]?(document.getElementById("threshold"+t).style.color="red",r=!0):document.getElementById("threshold"+t).style.color="black";return r}function formatValues(e){e.value=parseFloat(e.value).toFixed(2)}function saveGrades(){console.log(grades),console.log(course);for(var e in grades){console.log(grades[e]);var r=grades[e];$.ajax({url:"/enrolls/update/"+grades[e].id,type:"POST",data:{enroll:{lettergrade:r.lettergrade,percentage:r.percentage,course:course.id,student:r.student_id},id:r.id},error:function(e){console.log(e)},done:function(e){console.log(e)}})}}var sections=12,grades=$("#invisible").data("grades"),course=$("#invisible").data("course"),letters=["A+","A","A-","B+","B","B-","C+","C","C-","D","F"].reverse();$(document).ready(function(){calculateValues()});